# OTUS PRO Homework 13 Bash

## Домашняя работа 24: Пользователи и группы. Авторизация и аутентификация

### Домашнее задание:
**1. Подготовка рабочего места**   
**2. Написать скрипт для CRON, который раз в час будет формировать письмо и отправлять на заданную почту.**   
Необходимая информация в письме:   
* Список IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
* Список запрашиваемых URL (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта;
* Ошибки веб-сервера/приложения c момента последнего запуска;
* Список всех кодов HTTP ответа с указанием их кол-ва с момента последнего запуска скрипта.
* Скрипт должен предотвращать одновременный запуск нескольких копий, до его завершения.
В письме должен быть прописан обрабатываемый временной диапазон.
---
## Выполнение задания:
### 1. Подготовка рабочего места:
Выполнение домашнего задания предполагает, что на компьютере установлен Vagrant+VirtualBox   
**[Как установить Vagrant на Debian 12](https://github.com/avlikh/Install_Vagrant_Debian12/blob/main/README.md)**   

Развернем Vagrant-стенд:
  - Создайте папку с проектом и зайдите в нее (например: /opt/otus/bash):
```
mkdir -p /opt/otus/bash ; cd /opt/otus/bash
```
  - Клонируете проект с Github, набрав команду:
```
apt update -y && apt install git -y ; git clone https://github.com/avlikh/Otus_pro_13.git .
```
  - Запустите проект из папки, в которую склонировали проект (в нашем примере /opt/otus/bash):
```
vagrant up
```
Результатом выполнения команды vagrant up станет созданная виртуальная машина, с **Debian12**.   
  - Зайдите в виртуальную машину (box):
```
vagrant ssh
```
  - Дальнейшие действия выполняются от пользователя root. Переходим в root пользователя:
```
sudo -i
```
---
### 2. Написать скрипт для CRON, который раз в час будет формировать письмо и отправлять на заданную почту.

* В целевой операционной системе, согласно расписанию cron, раз в час будет собираться запрашиваемая информация и помещаться в файл "/var/log/monitoring_nginx.log".   
* Скрипт находится по следующему пути: /etc/cron.hourly/monitoring_nginx   
* Для удобства генерации http-запросов к web-серверу Nginx, на vagrant-машину проброшен 80 порт, в качестве порта 8080. (http://{vagrantserver_ip}:8080)   
